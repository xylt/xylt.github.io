<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>一禅学习python的第二天 - 致知阁</title>
	<meta name="description" content="一禅：师父，python是什么呀？   师父：且让为师给你娓娓道来。">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta property="og:image" content="">
	<link rel="shortcut icon" href="/assets/img/favicon/favicon.ico" type="image/x-icon">
	<link rel="apple-touch-icon" href="/assets/img/favicon/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicon/apple-touch-icon-114x114.png">
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#2d2a2a">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#2d2a2a">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#2d2a2a">

	<link href="https://fonts.googleapis.com/css?family=Finger+Paint|PT+Sans:400,700" rel="stylesheet">
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="/assets/css/main.css">
</head>

<body>

  <aside class="sidebar">

  <div class="sidebar-container">
    <div class="sidebar-logo">
      <a href="/" class="logo">Stone05</a>
    </div>

    <menu class="sidebar-menu">
      <li class="menu-items"><a class="menu-links" href="/">主页</a></li>
      <li class="menu-items"><a class="menu-links" href="/about/">关于</a></li>
      <li class="menu-items"><a class="menu-links" href="/contact/">联系我</a></li>
      <li class="menu-items"><a class="menu-links" href="https://github.com/xylt">My Github</a></li>
    </menu>

    <div class="sidebar-social">
      <li class="social-items"><a href="https://github.com/xylt" class="social-links"><i class="social-icons fa fa-github" aria-hidden="true"></i></a></li>
    </div>

  </div>
</aside>


  <main role="main">
    <div class="content">
      <article class="page-article">
  <div class="wrap-content">
    <header class="page-header">
      <h1 class="page-title">一禅学习python的第二天</h1>
      <div class="page-date"><span>2018, May 07&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
    </header>
    <div class="page-content">
      
      <img class="page-img" src=/assets/img/yichan2.jpg alt="一禅学习python的第二天">
      
      <p><strong>师父：</strong>一禅啊，今天为师来讲讲python的函数。</p>

<p>Python内置了很多有用的函数，我们可以直接调用。
要调用一个函数，需要知道函数的名称和参数，比如求绝对值的函数abs，只有一个参数。</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span> <span class="c"># 计算绝对值</span>
<span class="k">print</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="o">-</span><span class="mi">12</span><span class="p">))</span>
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>10
12
</code></pre>
</div>

<p><strong>一禅：</strong>师父，那这些函数是怎么定义的呢？</p>

<p><strong>师父：</strong>在Python中，定义一个函数要使用def语句，依次写出函数名、括号、括号中的参数和冒号:，然后，在缩进块中编写函数体，函数的返回值用return语句返回。</p>

<p>我们以自定义一个求绝对值的my_abs函数为例：</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">my_abs</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">x</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="n">x</span>
<span class="n">my_abs</span><span class="p">(</span><span class="o">-</span><span class="mi">8</span><span class="p">)</span>
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>8
</code></pre>
</div>

<p><strong>一禅：</strong>有时候想要定义一个函数，但还没有想好写什么内容。</p>

<p><strong>师父：</strong>这就需要空函数了，如果想定义一个什么事也不做的空函数，可以用pass语句</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">no_thing</span><span class="p">():</span>
    <span class="k">pass</span>
</code></pre>
</div>

<p><strong>一禅：</strong>师父，你看我输入了错误的参数类型。解释器并没有检查出参数的错误。</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="n">my_abs</span><span class="p">(</span><span class="s">'A'</span><span class="p">)</span>
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>---------------------------------------------------------------------------

TypeError                                 Traceback (most recent call last)

&lt;ipython-input-7-fe695080d9cd&gt; in &lt;module&gt;()
----&gt; 1 my_abs('A')


&lt;ipython-input-5-3d15a2be0676&gt; in my_abs(x)
      1 def my_abs(x):
----&gt; 2     if x &gt;= 0:
      3         return x
      4     else:
      5         return -x


TypeError: '&gt;=' not supported between instances of 'str' and 'int'
</code></pre>
</div>

<p><strong>师父：</strong>这是当然，咱们的函数里还缺少了<strong>参数检查</strong>。添加了参数检查后，如果传入错误的参数类型，函数就可以抛出一个错误,以便异常处理。</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">my_abs</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="nb">TypeError</span><span class="p">(</span><span class="s">'bad operand type'</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">x</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="n">x</span>
<span class="n">my_abs</span><span class="p">(</span><span class="s">'A'</span><span class="p">)</span>
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>---------------------------------------------------------------------------

TypeError                                 Traceback (most recent call last)

&lt;ipython-input-9-98dbdf153e00&gt; in &lt;module&gt;()
      6     else:
      7         return -x
----&gt; 8 my_abs('A')


&lt;ipython-input-9-98dbdf153e00&gt; in my_abs(x)
      1 def my_abs(x):
      2     if not isinstance(x, (int, float)):
----&gt; 3         raise TypeError('bad operand type')
      4     if x &gt;= 0:
      5         return x


TypeError: bad operand type
</code></pre>
</div>

<p><strong>一禅：</strong>师父，函数可以返回多个值吗？</p>

<p><strong>师父：</strong>当然，比如在游戏中经常需要从一个点移动到另一个点，给出坐标、位移和角度，就可以计算出新的新的坐标。</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">math</span>

<span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">step</span><span class="p">,</span> <span class="n">angle</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="n">nx</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">step</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
    <span class="n">ny</span> <span class="o">=</span> <span class="n">y</span> <span class="o">-</span> <span class="n">step</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">nx</span><span class="p">,</span> <span class="n">ny</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">move</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">6</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>151.96152422706632 70.0
</code></pre>
</div>

<p><strong>师父：</strong>但其实这只是一种假象，Python函数返回的仍然是单一值。</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="n">r</span> <span class="o">=</span> <span class="n">move</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">6</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>(151.96152422706632, 70.0)
</code></pre>
</div>

<p><strong>师父：</strong>其实返回值是一个tuple！但是，在语法上，返回一个tuple可以省略括号，而多个变量可以同时接收一个tuple，按位置赋给对应的值，所以，Python的函数返回多值其实就是返回一个tuple，但写起来更方便。</p>

<p><strong>师父：</strong>Python的函数定义非常简单，但灵活度却非常大。除了正常定义的必选参数外，还可以使用默认参数、可变参数和关键字参数，使得函数定义出来的接口，不但能处理复杂的参数，还可以简化调用者的代码。  ……一禅，你又在打盹。</p>

<p><strong>一禅：</strong>一禅是在想，假如函数有多个参数时，这些个参数在传入时，都必须按照位置顺序依次赋值吗？</p>

<p><strong>师父：</strong>这当然是不必要的。</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">enroll</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">gender</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">city</span><span class="o">=</span><span class="s">'XiAn'</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'name:'</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'gender:'</span><span class="p">,</span> <span class="n">gender</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'age:'</span><span class="p">,</span> <span class="n">age</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'city:'</span><span class="p">,</span> <span class="n">city</span><span class="p">)</span>
<span class="n">enroll</span><span class="p">(</span><span class="n">age</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s">'一禅'</span><span class="p">,</span> <span class="n">gender</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="c"># 通过关键字传入参数</span>
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>name: 一禅
gender: 1
age: 8
city: XiAn
</code></pre>
</div>

<p><strong>一禅：</strong>师父，是不是参数里填写了默认的参数，就能降低调用函数的难度</p>

<p><strong>师父：</strong>对，而且设置默认参数时，有几点要注意：</p>
<ul>
  <li>一是必选参数在前，默认参数在后，否则Python的解释器会报错。</li>
  <li>当函数有多个参数时，把变化大的参数放前面，变化小的参数放后面。变化小的参数就可以作为默认参数。</li>
</ul>

<p><strong>一禅：</strong>师父，我有个疑惑。你看默认参数是[]，但是函数似乎每次都“记住了”上次添加了’END’后的list。</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">add_end</span><span class="p">(</span><span class="n">L</span><span class="o">=</span><span class="p">[]):</span>
    <span class="n">L</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">'END'</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">L</span>
<span class="k">print</span><span class="p">(</span><span class="n">add_end</span><span class="p">())</span>
<span class="k">print</span><span class="p">(</span><span class="n">add_end</span><span class="p">())</span>
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>['END']
['END', 'END']
</code></pre>
</div>

<p><strong>师父：</strong>Python函数在定义的时候，默认参数L的值就被计算出来了，即[]，因为默认参数L也是一个变量，它指向对象[]，每次调用该函数，如果改变了L的内容，则下次调用时，默认参数的内容就变了，不再是函数定义时的[]了。<em>所以定义默认参数要牢记一点：默认参数必须指向不变对象！</em></p>

<p><strong>一禅：</strong>函数可不可以传入可变个参数？</p>

<p><strong>师父：</strong>为师来给你看一个示例。</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">calc</span><span class="p">(</span><span class="o">*</span><span class="n">numbers</span><span class="p">):</span>
    <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">numbers</span><span class="p">:</span>
        <span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="n">n</span> <span class="o">*</span> <span class="n">n</span>
    <span class="k">return</span> <span class="nb">sum</span>
<span class="k">print</span><span class="p">(</span><span class="n">calc</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">calc</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>5
1
</code></pre>
</div>

<p><strong>师父：</strong>定义可变参数和定义一个list或tuple参数相比，仅仅在参数前面加了一个*号。在函数内部，参数numbers接收到的是一个tuple，因此，函数代码完全不变。但是，调用该函数时，可以传入任意个参数，包括0个参数。</p>

<p><strong>师父：</strong>可变参数允许你传入0个或任意个参数，这些可变参数在函数调用时自动组装为一个tuple。而关键字参数允许你传入0个或任意个含参数名的参数，这些关键字参数在函数内部自动组装为一个dict。关键字参数是在参数前面加了两个*号。一禅，你来总结一下今天的所学。</p>

<p><strong>一禅：</strong>在Python中定义函数，可以用必选参数、默认参数、可变参数、关键字参数和命名关键字参数，这5种参数都可以组合使用。但是请注意，参数定义的顺序必须是：必选参数、默认参数、可变参数、命名关键字参数和关键字参数。比如：</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">f1</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'a ='</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="s">'b ='</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="s">'c ='</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="s">'args ='</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="s">'kw ='</span><span class="p">,</span> <span class="n">kw</span><span class="p">)</span>
</code></pre>
</div>

<p><strong>师父：</strong>好，今天就到此为止了，一禅，你该去洗衣服了。</p>

    </div>
    

  </div>
</article>

    </div>
  </main>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>
